import mailchimp from '@mailchimp/mailchimp_marketing';

// src/newsletter/mailchimp.ts
mailchimp.setConfig({
  apiKey: process.env.MAILCHIMP_API_KEY,
  server: process.env.MAILCHIMP_API_SERVER
});
var mailchimpHandler = async (req, res) => {
  const { email } = req.body;
  const response = await mailchimp.lists.addListMember(process.env.MAILCHIMP_AUDIENCE_ID, {
    email_address: email,
    status: "subscribed"
  });
  return response;
};

export { mailchimpHandler };
